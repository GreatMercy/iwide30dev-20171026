<template>
  <div class="jfk-pages jfk-page__orderCoupon">
    <div class="jfk-pages__theme"></div>
    <headTitle :headTitleMsg="headTitleMsg" />
    <orderStatus :orderStatus="orderStatusMsg" :showtip="showtip"/>
    <div class="orderCoupon jfk-pl-30 jfk-pr-30">
      <div class="orderCoupon__main">
        <ordergiftinfo  :giftinfo="giftinfo"/>
        <div class="line"></div>
        <menuList :menu='menuList'/>
      </div>
      <couponDetail />
    </div>
    <orderInfo />
    <orderBtns />
    <transactionSnapshot v-if="TSshow" @TSclose="TSshow = false" transition="fade"/>
  </div>
</template>
<script>
  import formatUrlParams from 'jfk-ui/lib/format-urlparams.js'
  import { getOrderDetail } from '@/service/http'
  import headTitle from '../../components/common/headTitle'
  import orderStatus from '../../components/orderDetail/orderStatus.vue'
  import ordergiftinfo from '../../components/orderDetail/orderGiftinfo.vue'
  import menuList from '../../components/common/menuList.vue'
  import couponDetail from '../../components/orderDetail/coupon.vue'
  import orderInfo from '../../components/orderDetail/orderInfo.vue'
  import orderBtns from '../../components/orderDetail/orderBtns.vue'
  import transactionSnapshot from '../../components/orderDetail/transactionSnapshot.vue'
  export default {
    name: 'orderDetail',
    components: {
      headTitle,
      orderStatus,
      ordergiftinfo,
      menuList,
      couponDetail,
      orderInfo,
      orderBtns,
      transactionSnapshot
    },
    data () {
      return {
        TSshow: false,
        headTitleMsg: '该商品由柚子酒店提供',
        showtip: false,
        giftinfo: {
          imgUrl: '../../assets/image/goods_icon.png',
          title: '四季酒店预售礼包',
          number: '1',
          price: '678',
          validate: '有效期 2017／10／30',
          showValidate: true
        },
        menuList: {
        },
        orderStatusMsg: '购买成功.',
        orderInfoObject: {
          orderNumber: '1208328478',
          offerTime: '2017/05/01',
          orderPrice: '987'
        },
        orderCouponObject: [
          {
            status: 'normal',
            coupons: '321321312'
          },
          {
            status: 'normal',
            coupons: '321321312'
          },
          {
            status: 'used',
            coupons: '321321312'
          },
          {
            status: 'send',
            coupons: '321321312'
          },
          {
            status: 'gift',
            coupons: '321321312'
          },
          {
            status: 'gift',
            coupons: '321321312'
          },
          {
            status: 'gift',
            coupons: '321321312'
          },
          {
            status: 'gift',
            coupons: '321321312'
          },
          {
            status: 'gift',
            coupons: '321321312'
          },
          {
            status: 'gift',
            coupons: '321321312'
          },
          {
            status: 'gift',
            coupons: '321321312'
          },
          {
            status: 'gift',
            coupons: '321321312'
          }
        ]
      }
    },
    beforeCreate () {
      let params = formatUrlParams(location.href)
      if (process.env.NODE_ENV === 'development' && !params.oid) {
        params.oid = '1000011950'
      }
      this.oid = params.oid
    },
    created () {
      getOrderDetail({
        oid: this.oid
      }).then(function (res) {
        console.log(res, 'ni')
      })
    }
  }
</script>
<style>
</style>
