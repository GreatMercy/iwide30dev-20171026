webpackJsonp([24],{190:function(s,e,t){"use strict";function i(s){return s&&s.__esModule?s:{default:s}}Object.defineProperty(e,"__esModule",{value:!0});var a=t(179),d=i(a),r=t(53),o=i(r),n=t(28),c=i(n),l=t(27),_=t(178),m=i(_),f={province:"",city:"",region:"",contact:"",phone:"",address:""};e.default={name:"jfk-address",components:{"address-select":function(){return t.e(25).then(t.bind(null,229))}},data:function(){var s=this;return{aid:"-1",eaid:"-1",isEditing:!1,isSavIng:!1,loading:!1,actionsheetVisible:!1,addressDataLoaded:!1,addressPicked:{},addressRegionIds:[],rules:{contact:[{required:!0,message:"收件人为空"},{max:10,length:!0,message:"收件人必须在10个字符内"}],phone:[{required:!0,message:"收件电话为空"},{type:"phone",message:"手机号码错误"}],area:[{validator:function(){return s.addressPicked.province},message:"收件地址为空"}],address:[{required:!0,message:"详细地址为空"}]},validResult:{contact:{passed:!1,message:""},phone:{passed:!1,message:""},area:{passed:!1,message:""},address:{passed:!1,message:""}}}},beforeCreate:function(){this.maxHeight=window.innerHeight-50-15+"px"},created:function(){this.aid=this.addressId,this.address.length||(this.isEditing=!0)},computed:{showAdd:function(){return this.addressDataLoaded||(this.loading=!0),!this.address.length||!!this.isEditing},addressPickedDetail:function(){var s=this.addressPicked,e=s.province_name,t=void 0===e?"":e,i=s.city_name,a=void 0===i?"":i,d=s.region_name;return t+a+(void 0===d?"":d)},addressItems:{get:function(){return this.address},set:function(s){this.$emit("update:address",s)}}},watch:{isEditing:function(s){if(s){var e=(0,c.default)({},f),t=this.eaid,i=this.address;if("-1"!==t&&i.length){var a=i.filter(function(s){return s.address_id===t});e=(0,c.default)(e,a[0])}this.addressPicked=e}},addressId:function(s){this.aid=s},showAddressList:function(s){s&&this.addressItems.length&&(this.eaid="-1",this.isEditing=!1)}},methods:{handleEditAddress:function(s){this.isEditing=!0,this.eaid=s},checkForm:function(){var s=this.addressPicked,e=this.rules,t=this,i=!0;for(var a in e){var r=(0,m.default)(s[a],e[a]);t.validResult=(0,c.default)({},t.validResult,(0,d.default)({},a,(0,o.default)({},r,{show:!r.passed}))),r.passed||(i=!1)}return i},handleSaveAddress:function(){if(this.checkForm()&&!this.isSaving){var s=this,e=this.addressPicked,t=this.addressItems,i=e.address_id,a=(0,c.default)({},e);this.isSaving=!0,(0,l.postExpressSave)(a).then(function(a){if(s.isSaving=!1,s.eaid="-1",s.isEditing=!1,e.address_id=a.web_data.address_id,i){for(var d=-1,r=t.length,o=0;o<r;){if(t[o].address_id===i){d=o;break}o++}t.splice(d,1,e)}else t.unshift(e);s.$emit("pick-address",a.web_data.address_id)}).catch(function(){s.isSaving=!1})}},handlePickAddress:function(s){this.$emit("pick-address",s)},handleAddAddress:function(){this.eaid="-1",this.isEditing=!0},handleAddressLoaded:function(){this.loading=!1,this.addressDataLoaded=!0},handleAddressPicked:function(s,e){this.actionsheetVisible=!1,this.addressPicked=(0,c.default)({},this.addressPicked,{province:e[0].region_id,province_name:e[0].region_name,city:e[1].region_id,city_name:e[1].region_name,region:e[2]&&e[2].region_id,region_name:e[2]&&e[2].region_name})},handleShowAddressSelect:function(){var s=this.addressPicked;this.addressRegionIds=[s.province,s.city,s.region],this.actionsheetVisible=!0},handleHiddenError:function(s){this.validResult=(0,c.default)({},this.validResult,(0,d.default)({},s,{show:!1}))}},props:{address:{type:Array,required:!0,default:[]},addressId:String,showAddressList:Number}}},230:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t(190),a=t.n(i),d=t(287),r=t(26),o=r(a.a,d.a,null,null,null);e.default=o.exports},287:function(s,e,t){"use strict";var i=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"jfk-address jfk-form font-size--28"},[t("div",{directives:[{name:"show",rawName:"v-show",value:s.showAdd,expression:"showAdd"}],staticClass:"jfk-address__add jfk-pl-30 jfk-pr-30"},[t("form",{staticClass:"jfk-address-form"},[t("div",{staticClass:"form-item"},[t("label",[t("span",{staticClass:"form-item__label form-item__label--word-3 font-color-extra-light-gray"},[s._v("收件人")]),s._v(" "),t("div",{staticClass:"form-item__body"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.addressPicked.contact,expression:"addressPicked.contact"}],staticClass:"font-color-white",attrs:{type:"text",placeholder:"请输入收件人"},domProps:{value:s.addressPicked.contact},on:{input:function(e){e.target.composing||(s.addressPicked.contact=e.target.value)}}}),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:s.validResult.contact.show,expression:"validResult.contact.show"}],staticClass:"form-item__status is-error",on:{click:function(e){s.handleHiddenError("contact")}}},[t("i",{staticClass:"form-item__status-icon jfk-font icon-msg_icon_error_norma"}),s._v(" "),t("span",{staticClass:"form-item__status-tip"},[t("i",{staticClass:"form-item__status-cont"},[s._v(s._s(s.validResult.contact.message))]),s._v(" "),t("i",{staticClass:"form-item__status-trigger"},[s._v("重新输入")])])])])])]),s._v(" "),t("div",{staticClass:"form-item"},[t("label",[t("span",{staticClass:"form-item__label font-color-extra-light-gray"},[s._v("收件电话")]),s._v(" "),t("div",{staticClass:"form-item__body"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.addressPicked.phone,expression:"addressPicked.phone"}],staticClass:"font-color-white",attrs:{type:"text",placeholder:"请输入收件人手机号码"},domProps:{value:s.addressPicked.phone},on:{input:function(e){e.target.composing||(s.addressPicked.phone=e.target.value)}}}),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:s.validResult.phone.show,expression:"validResult.phone.show"}],staticClass:"form-item__status is-error",on:{click:function(e){s.handleHiddenError("phone")}}},[t("i",{staticClass:"form-item__status-icon jfk-font icon-msg_icon_error_norma"}),s._v(" "),t("span",{staticClass:"form-item__status-tip"},[t("i",{staticClass:"form-item__status-cont"},[s._v(s._s(s.validResult.phone.message))]),s._v(" "),t("i",{staticClass:"form-item__status-trigger"},[s._v("重新输入")])])])])])]),s._v(" "),t("div",{staticClass:"form-item form-item__select"},[t("span",{staticClass:"form-item__label  font-color-extra-light-gray"},[s._v("收件地址")]),s._v(" "),t("div",{staticClass:"form-item__body",on:{click:s.handleShowAddressSelect}},[t("p",{directives:[{name:"show",rawName:"v-show",value:!s.addressPickedDetail,expression:"!addressPickedDetail"}],staticClass:"tip font-color-light-gray"},[s._v("请选择收件区域")]),s._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:s.addressPickedDetail,expression:"addressPickedDetail"}],staticClass:"tip font-color-white"},[s._v(s._s(s.addressPickedDetail))]),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:s.validResult.area.show,expression:"validResult.area.show"}],staticClass:"form-item__status is-error",on:{click:function(e){s.handleHiddenError("area")}}},[t("i",{staticClass:"form-item__status-icon jfk-font icon-msg_icon_error_norma"}),s._v(" "),t("span",{staticClass:"form-item__status-tip"},[t("i",{staticClass:"form-item__status-cont"},[s._v(s._s(s.validResult.area.message))]),s._v(" "),t("i",{staticClass:"form-item__status-trigger"},[s._v("重新输入")])])])]),s._v(" "),s._m(0)]),s._v(" "),t("div",{staticClass:"form-item"},[t("label",[t("span",{staticClass:"form-item__label font-color-extra-light-gray"},[s._v("详细地址")]),s._v(" "),t("div",{staticClass:"form-item__body"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.addressPicked.address,expression:"addressPicked.address"}],staticClass:"font-color-white",attrs:{type:"text",placeholder:"如街道、楼层等"},domProps:{value:s.addressPicked.address},on:{input:function(e){e.target.composing||(s.addressPicked.address=e.target.value)}}}),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:s.validResult.address.show,expression:"validResult.address.show"}],staticClass:"form-item__status is-error",on:{click:function(e){s.handleHiddenError("address")}}},[t("i",{staticClass:"form-item__status-icon jfk-font icon-msg_icon_error_norma"}),s._v(" "),t("span",{staticClass:"form-item__status-tip"},[t("i",{staticClass:"form-item__status-cont"},[s._v(s._s(s.validResult.address.message))]),s._v(" "),t("i",{staticClass:"form-item__status-trigger"},[s._v("重新输入")])])])])])])]),s._v(" "),t("div",{staticClass:"jfk-address__add-control"},[t("a",{staticClass:"jfk-button--free jfk-button jfk-button--primary is-plain",class:{"is-disabled":s.isSavIng},attrs:{href:"javascript:;"},on:{click:s.handleSaveAddress}},[s._v("保存")])])]),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!s.showAdd,expression:"!showAdd"}],staticClass:"jfk-address__list jfk-pl-30 jfk-pr-30"},[t("ul",{staticClass:"jfk-address__list-box",style:{"max-height":s.maxHeight}},s._l(s.addressItems,function(e){return t("li",{key:e.address_id,staticClass:"jfk-address__list-item jfk-pt-30"},[t("div",{staticClass:"jfk-radio jfk-radio--shape-rect color-golden"},[t("label",{staticClass:"jfk-radio__label"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.aid,expression:"aid"}],attrs:{type:"radio"},domProps:{checked:e.address_id===s.aid,value:e.address_id,checked:s._q(s.aid,e.address_id)},on:{__c:function(t){s.aid=e.address_id}}}),s._v(" "),t("div",{staticClass:"jfk-radio__text",on:{click:function(t){s.handlePickAddress(e.address_id)}}},[t("div",{staticClass:"jfk-address__list-item-cont jfk-flex is-align-middle"},[t("div",{staticClass:"address-item-box"},[t("div",{staticClass:"address-item-cont"},[t("span",{staticClass:"contact"},[s._v(s._s(e.contact))]),s._v(" "),t("span",{staticClass:"phone"},[s._v(s._s(e.phone))])]),s._v(" "),t("div",{staticClass:"address-item-cont"},[s._v("\n                    "+s._s((e.provice_name||"")+(e.city_name||"")+(e.region_name||"")+(e.address||""))+"\n                  ")])]),s._v(" "),t("div",{staticClass:"address-item-edit jfk-flex is-align-middle is-justify-center",on:{click:function(t){t.preventDefault(),t.stopPropagation(),s.handleEditAddress(e.address_id)}}},[t("i",{staticClass:"edit-icon jfk-font icon-mall_icon_edit color-golden"})])])]),s._v(" "),s._m(1,!0)])])])})),s._v(" "),t("div",{staticClass:"jfk-address__list-control"},[t("a",{staticClass:"jfk-button jfk-button--primary jfk-button-higher jfk-button--free",attrs:{href:"javascript:;"},on:{click:s.handleAddAddress}},[t("i",{staticClass:"jfk-address__list-icon jfk-d-ib"},[s._v("+")]),t("i",{staticClass:"jfk-d-ib"},[s._v("新增收货地址")])])])]),s._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:s.loading,expression:"loading"}]},[s._v("正在加载")]),s._v(" "),t("jfk-popup",{staticClass:"jfk-actionsheet jfk-actionsheet__address",attrs:{closeOnClickModal:!1,position:"bottom"},model:{value:s.actionsheetVisible,callback:function(e){s.actionsheetVisible=e},expression:"actionsheetVisible"}},[t("address-select",{attrs:{ids:s.addressRegionIds},on:{"address-data-loaded":s.handleAddressLoaded,"address-picked":s.handleAddressPicked}})],1)],1)},a=[function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("span",{staticClass:"form-item__foot"},[t("i",{staticClass:"jfk-font icon-user_icon_jump_normal font-color-extra-light-gray"})])},function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("span",{staticClass:"jfk-radio__icon"},[t("i",{staticClass:"jfk-font icon-radio_icon_selected_default jfk-radio__icon-icon"})])}],d={render:i,staticRenderFns:a};e.a=d}});