var max = $('.swiper-slide').length;
var nextButton = $('.right-arrow'), prevButton = $('.left-arrow');
var swiper = $('.swiper-slide');

/**
 * 检测是否能点击下一张，和上一张
 * @param  {string} 活动的index值
 * */
function checkCanClick (activeIndex) {
	if (parseInt(activeIndex) + 1 >= max) {
		nextButton.removeClass('active');
		prevButton.addClass('active');
	}

	if (parseInt(activeIndex) + 1 < max) {
		nextButton.addClass('active');
		prevButton.addClass('active');
	}

	if (parseInt(activeIndex) + 1 === 1) {
		prevButton.removeClass('active');
	}

	$('#name').html(swiper.eq(activeIndex).attr('name'));
	$('#discount').html(swiper.eq(activeIndex).attr('discount'));
	$('#original').html('¥' + swiper.eq(activeIndex).attr('original'));
	$('#href').attr('href', swiper.eq(activeIndex).attr('href'));
}

/**
 * 轮播的切换
 * */
function banner () {

	var mySwiper = new Swiper('.swiper-container', {
		direction: 'horizontal',
		loop: false,

		// 如果需要前进后退按钮
		nextButton: '.right-arrow',
		prevButton: '.left-arrow',
		onSlideChangeEnd: function (swiper) {
			console.log(swiper.activeIndex);
			checkCanClick(swiper.activeIndex)
		}
	});

	if (max > 1) {
		nextButton.addClass('active');
	}

	if (max === 1) {
		nextButton.removeClass('active');
		prevButton.removeClass('active');
	}


	$('#name').html(swiper.eq(0).attr('name'));
	$('#discount').html(swiper.eq(0).attr('discount'));
	$('#original').html('¥' + swiper.eq(0).attr('original'));
	$('#href').attr('href', swiper.eq(0).attr('href'));
}


/**
 * 是否秒杀的显示
 * */

banner();


