webpackJsonp([24],{191:function(s,e,i){"use strict";function t(s){return s&&s.__esModule?s:{default:s}}Object.defineProperty(e,"__esModule",{value:!0});var a=i(29),d=t(a),r=i(28),n=i(180),o=t(n),c={province:"",city:"",region:"",contact:"",phone:"",address:""};e.default={name:"jfk-address",components:{"address-select":function(){return i.e(25).then(i.bind(null,227))}},data:function(){var s=this;return{aid:"-1",eaid:"-1",isEditing:!1,isSavIng:!1,loading:!1,actionsheetVisible:!1,addressDataLoaded:!1,addressPicked:{},addressRegionIds:[],rules:{contact:[{required:!0,message:"请输入收件人"},{max:10,length:!0,message:"收件人必须在10个字符内"}],phone:[{required:!0,message:"请输入收件电话"},{type:"phone",message:"请填写正确的手机号码"}],area:[{validator:function(){return s.addressPicked.province},message:"请选择收件地址"}],address:[{required:!0,message:"请填写详细地址"}]},validResult:{contact:{passed:!1,message:""},phone:{passed:!1,message:""},area:{passed:!1,message:""},address:{passed:!1,message:""}}}},beforeCreate:function(){this.maxHeight=window.innerHeight-50-15+"px"},created:function(){this.aid=this.addressId,this.address.length||(this.isEditing=!0)},computed:{showAdd:function(){return this.addressDataLoaded||(this.loading=!0),!this.address.length||!!this.isEditing},addressPickedDetail:function(){var s=this.addressPicked,e=s.province_name,i=void 0===e?"":e,t=s.city_name,a=void 0===t?"":t,d=s.region_name;return i+a+(void 0===d?"":d)},addressItems:{get:function(){return this.address},set:function(s){this.$emit("update:address",s)}}},watch:{isEditing:function(s){if(s){var e=(0,d.default)({},c),i=this.eaid,t=this.address;if("-1"!==i&&t.length){var a=t.filter(function(s){return s.address_id===i});e=(0,d.default)(e,a[0])}this.addressPicked=e}},addressId:function(s){this.aid=s},showAddressList:function(s){s&&this.addressItems.length&&(this.eaid="-1",this.isEditing=!1)}},methods:{handleEditAddress:function(s){this.isEditing=!0,this.eaid=s},checkForm:function(){var s=this.addressPicked,e=this.rules,i=this,t=!0;for(var a in e){var r=(0,o.default)(s[a],e[a]);i.validResult[a]=(0,d.default)({},i.validResult[a],r),r.passed||(t=!1,alert(r.message))}return t},handleSaveAddress:function(){if(this.checkForm()&&!this.isSaving){var s=this,e=this.addressPicked,i=this.addressItems,t=e.address_id,a=(0,d.default)({},e);this.isSaving=!0,(0,r.postExpressSave)(a).then(function(a){if(s.isSaving=!1,s.eaid="-1",s.isEditing=!1,e.address_id=a.web_data.address_id,t){for(var d=-1,r=i.length,n=0;n<r;){if(i[n].address_id===t){d=n;break}n++}i.splice(d,1,e)}else i.unshift(e);s.$emit("pick-address",a.web_data.address_id)}).catch(function(){s.isSaving=!1})}},handlePickAddress:function(s){this.$emit("pick-address",s)},handleAddAddress:function(){this.eaid="-1",this.isEditing=!0},handleAddressLoaded:function(){this.loading=!1,this.addressDataLoaded=!0},handleAddressPicked:function(s,e){this.actionsheetVisible=!1,this.addressPicked=(0,d.default)({},this.addressPicked,{province:e[0].region_id,province_name:e[0].region_name,city:e[1].region_id,city_name:e[1].region_name,region:e[2]&&e[2].region_id,region_name:e[2]&&e[2].region_name})},handleShowAddressSelect:function(){var s=this.addressPicked;this.addressRegionIds=[s.province,s.city,s.region],this.actionsheetVisible=!0}},props:{address:{type:Array,required:!0,default:[]},addressId:String,showAddressList:Number}}},228:function(s,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=i(191),a=i.n(t),d=i(285),r=i(27),n=r(a.a,d.a,null,null,null);e.default=n.exports},285:function(s,e,i){"use strict";var t=function(){var s=this,e=s.$createElement,i=s._self._c||e;return i("div",{staticClass:"jfk-address jfk-form font-size--28"},[i("div",{directives:[{name:"show",rawName:"v-show",value:s.showAdd,expression:"showAdd"}],staticClass:"jfk-address__add jfk-pl-30 jfk-pr-30"},[i("form",{staticClass:"jfk-address-form"},[i("div",{staticClass:"form-item"},[i("label",[i("span",{staticClass:"form-item__label form-item__label--word-3 font-color-extra-light-gray"},[s._v("收件人")]),s._v(" "),i("div",{staticClass:"form-item__body"},[i("input",{directives:[{name:"model",rawName:"v-model",value:s.addressPicked.contact,expression:"addressPicked.contact"}],staticClass:"font-color-white",attrs:{type:"text",placeholder:"请输入收件人"},domProps:{value:s.addressPicked.contact},on:{input:function(e){e.target.composing||(s.addressPicked.contact=e.target.value)}}})])])]),s._v(" "),i("div",{staticClass:"form-item"},[i("label",[i("span",{staticClass:"form-item__label font-color-extra-light-gray"},[s._v("收件电话")]),s._v(" "),i("div",{staticClass:"form-item__body"},[i("input",{directives:[{name:"model",rawName:"v-model",value:s.addressPicked.phone,expression:"addressPicked.phone"}],staticClass:"font-color-white",attrs:{type:"text",placeholder:"请输入收件人手机号码"},domProps:{value:s.addressPicked.phone},on:{input:function(e){e.target.composing||(s.addressPicked.phone=e.target.value)}}})])])]),s._v(" "),i("div",{staticClass:"form-item form-item__select"},[i("span",{staticClass:"form-item__label  font-color-extra-light-gray"},[s._v("收件地址")]),s._v(" "),i("div",{staticClass:"form-item__body",on:{click:s.handleShowAddressSelect}},[i("p",{directives:[{name:"show",rawName:"v-show",value:!s.addressPickedDetail,expression:"!addressPickedDetail"}],staticClass:"tip font-color-light-gray"},[s._v("请选择收件区域")]),s._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:s.addressPickedDetail,expression:"addressPickedDetail"}],staticClass:"tip font-color-white"},[s._v(s._s(s.addressPickedDetail))])]),s._v(" "),s._m(0)]),s._v(" "),i("div",{staticClass:"form-item"},[i("label",[i("span",{staticClass:"form-item__label font-color-extra-light-gray"},[s._v("详细地址")]),s._v(" "),i("div",{staticClass:"form-item__body"},[i("input",{directives:[{name:"model",rawName:"v-model",value:s.addressPicked.address,expression:"addressPicked.address"}],staticClass:"font-color-white",attrs:{type:"text",placeholder:"如街道、楼层等"},domProps:{value:s.addressPicked.address},on:{input:function(e){e.target.composing||(s.addressPicked.address=e.target.value)}}})])])])]),s._v(" "),i("div",{staticClass:"jfk-address__add-control"},[i("a",{staticClass:"jfk-button--free jfk-button jfk-button--primary is-plain",class:{"is-disabled":s.isSavIng},attrs:{href:"javascript:;"},on:{click:s.handleSaveAddress}},[s._v("保存")])])]),s._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!s.showAdd,expression:"!showAdd"}],staticClass:"jfk-address__list jfk-pl-30 jfk-pr-30"},[i("ul",{staticClass:"jfk-address__list-box",style:{"max-height":s.maxHeight}},s._l(s.addressItems,function(e){return i("li",{key:e.address_id,staticClass:"jfk-address__list-item jfk-pt-30"},[i("div",{staticClass:"jfk-radio jfk-radio--shape-rect color-golden"},[i("label",{staticClass:"jfk-radio__label"},[i("input",{directives:[{name:"model",rawName:"v-model",value:s.aid,expression:"aid"}],attrs:{type:"radio"},domProps:{checked:e.address_id===s.aid,value:e.address_id,checked:s._q(s.aid,e.address_id)},on:{__c:function(i){s.aid=e.address_id}}}),s._v(" "),i("div",{staticClass:"jfk-radio__text",on:{click:function(i){s.handlePickAddress(e.address_id)}}},[i("div",{staticClass:"jfk-address__list-item-cont jfk-flex is-align-middle"},[i("div",{staticClass:"address-item-box"},[i("div",{staticClass:"address-item-cont"},[i("span",{staticClass:"contact"},[s._v(s._s(e.contact))]),s._v(" "),i("span",{staticClass:"phone"},[s._v(s._s(e.phone))])]),s._v(" "),i("div",{staticClass:"address-item-cont"},[s._v("\n                    "+s._s((e.provice_name||"")+(e.city_name||"")+(e.region_name||"")+(e.address||""))+"\n                  ")])]),s._v(" "),i("div",{staticClass:"address-item-edit jfk-flex is-align-middle is-justify-center",on:{click:function(i){i.preventDefault(),i.stopPropagation(),s.handleEditAddress(e.address_id)}}},[i("i",{staticClass:"edit-icon jfk-font icon-mall_icon_edit color-golden"})])])]),s._v(" "),s._m(1,!0)])])])})),s._v(" "),i("div",{staticClass:"jfk-address__list-control"},[i("a",{staticClass:"jfk-button jfk-button--primary jfk-button-higher jfk-button--free",attrs:{href:"javascript:;"},on:{click:s.handleAddAddress}},[i("i",{staticClass:"jfk-address__list-icon jfk-d-ib"},[s._v("+")]),i("i",{staticClass:"jfk-d-ib"},[s._v("新增收货地址")])])])]),s._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:s.loading,expression:"loading"}]},[s._v("正在加载")]),s._v(" "),i("jfk-popup",{staticClass:"jfk-actionsheet jfk-actionsheet__address",attrs:{closeOnClickModal:!1,position:"bottom"},model:{value:s.actionsheetVisible,callback:function(e){s.actionsheetVisible=e},expression:"actionsheetVisible"}},[i("address-select",{attrs:{ids:s.addressRegionIds},on:{"address-data-loaded":s.handleAddressLoaded,"address-picked":s.handleAddressPicked}})],1)],1)},a=[function(){var s=this,e=s.$createElement,i=s._self._c||e;return i("span",{staticClass:"form-item__foot"},[i("i",{staticClass:"jfk-font icon-user_icon_jump_normal font-color-extra-light-gray"})])},function(){var s=this,e=s.$createElement,i=s._self._c||e;return i("span",{staticClass:"jfk-radio__icon"},[i("i",{staticClass:"jfk-font icon-radio_icon_selected_default jfk-radio__icon-icon"})])}],d={render:t,staticRenderFns:a};e.a=d}});